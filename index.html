<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8>
    <title>Cube Simulator</title>
    <style>
      body { margin: 0; }
      canvas { width: 100%; height: 100% }
      button {width: 80px}
      .UI {position: fixed}
      .green{background: green}
      .red{background: red}
      .blue{background: blue}
      .orange{background: orange}
      .white{background: white}
      .yellow{background: yellow}

    </style>
  </head>
  <body>
    <div class ="UI">
      <button type="button" class='red'
        onclick="rubik.rotate('F');rubik.updateRenderer()">CW</button>
      <button type="button" class='red'
        onclick="rubik.rotate('F*');rubik.updateRenderer()">CCW</button>
      <button type="button" class='orange'
        onclick="rubik.rotate('B');rubik.updateRenderer()">CW</button>
      <button type="button" class='orange'
        onclick="rubik.rotate('B*');rubik.updateRenderer()">CCW</button>
      <button type="button" class='blue'
        onclick="rubik.rotate('R');rubik.updateRenderer()">CW</button>
      <button type="button" class='blue'
        onclick="rubik.rotate('R*');rubik.updateRenderer()">CCW</button>
      <button type="button" class='green'
        onclick="rubik.rotate('L');rubik.updateRenderer()">CW</button>
      <button type="button" class='green'
        onclick="rubik.rotate('L*');rubik.updateRenderer()">CCW</button>
      <button type="button" class='white'
        onclick="rubik.rotate('U');rubik.updateRenderer()">CW</button>
      <button type="button" class='white'
        onclick="rubik.rotate('U*');rubik.updateRenderer()">CCW</button>
      <button type="button" class='yellow'
        onclick="rubik.rotate('D');rubik.updateRenderer()">CW</button>
      <button type="button" class='yellow'
        onclick="rubik.rotate('D*');rubik.updateRenderer()">CCW</button>
      <button type="button"
        onclick="scramble()">Scramble</button>
      <button type="button"
        onclick="restore()">Restore</button>
    </div>
    <script src="js/three.js"></script>
    <script src="js/TrackballControls.js"></script>
    <script src="js/cube-sim/init.js"></script>
    <script src="js/cube-sim/piece.js"></script>
    <script src="js/cube-sim/socket.js"></script>
    <script src="js/cube-sim/center.js"></script>
    <script src="js/cube-sim/corner.js"></script>
    <script src="js/cube-sim/edge.js"></script>
    <script src="js/cube-sim/coloredCube.js"></script>
    <script src="js/cube-sim/cube333.js"></script>
    <script>
      //scene setup
      var scene = new THREE.Scene();
      var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

      var renderer = new THREE.WebGLRenderer();
      renderer.setSize( window.innerWidth, window.innerHeight );
      document.body.appendChild( renderer.domElement );

      // Controls
      controls = new THREE.TrackballControls( camera );
      controls.rotateSpeed = 2.5;
      controls.noZoom = true;
      controls.noPan = true;
      controls.staticMoving = true;
      controls.dynamicDampingFactor = 0.3;
      controls.keys = [ 65, 83, 68 ];

      //add light
      var directionalLight = new THREE.DirectionalLight( 0xffffff, 1 );
      directionalLight.position.set( 2, 1, 2 );
      scene.add( directionalLight );
      var directionalLight2 = new THREE.DirectionalLight( 0xffffff, 1 );
      directionalLight2.position.set( -3, -1, 2 );
      scene.add( directionalLight2 );

      var directionalLight = new THREE.DirectionalLight( 0xffffff, .5 );
      directionalLight.position.set( 2, 1, -2 );
      scene.add( directionalLight );
      var directionalLight2 = new THREE.DirectionalLight( 0xffffff, .5 );
      directionalLight2.position.set( -3, -1, -2 );
      scene.add( directionalLight2 );

      camera.position.z = 5;
      //Draw cube
      var rubik = new CUBES.Cube333();
      rubik.initRenderer();
      scene.add(rubik.object3D);
      rubik.updateRenderer()

      //Drawing loop

      animate();

      function animate() {
        requestAnimationFrame( animate );
        renderer.render( scene, camera );
        controls.update();
      }

      function render() {
        renderer.render( scene, camera );
      }
      //Button controls for now
      function restore(){
        scene.remove(rubik.object3D);
        rubik = new CUBES.Cube333();
        rubik.initRenderer();
        scene.add(rubik.object3D);
      }
      var moves =['U','D','L','R','F','B'];
      function scramble(){
        for (var i = 0; i < 30; i++) {
          var index = getRandomIntInclusive(0,moves.length-1);
          rubik.rotate(moves[index]);
        }
        rubik.updateRenderer();
      }
      function getRandomIntInclusive(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }
    </script>
  </body>
</html>
